(this.webpackJsonpworkroom=this.webpackJsonpworkroom||[]).push([[0],{166:function(e,t,a){"use strict";a.r(t),a.d(t,"FirebaseConfig",(function(){return n}));var n={apiKey:"AIzaSyCoCDFkYC0JLyKqSfWYJz-L7Ey0X7B3Has",authDomain:"cse441-group1.firebaseapp.com",databaseURL:"https://cse441-group1.firebaseio.com",projectId:"cse441-group1",storageBucket:"cse441-group1.appspot.com",messagingSenderId:"1041296575522",appId:"1:1041296575522:web:ad5fe069213223e80f0e7b"}},168:function(e,t,a){},171:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"addStart",(function(){return U})),a.d(n,"fetchStarts",(function(){return I})),a.d(n,"addToDo",(function(){return R})),a.d(n,"addFeedback",(function(){return B})),a.d(n,"completeToDo",(function(){return D})),a.d(n,"fetchToDos",(function(){return M})),a.d(n,"fetchAudios",(function(){return x}));a(96),a(97);var r=a(0),o=a.n(r),s=a(87),c=a.n(s),i=a(18),l=a(26),u=a(89),m=Object(l.c)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TODOS":case"FETCH_STARTS":return t.payload;default:return e}}}),d=a(16),h=a(17),p=a(20),f=a(19),v=a(40),g=a(28),b=a.n(g),E=a(9),y=a.n(E),w=a(22),k=a(41),C=a(90);k.initializeApp(C.FirebaseConfig);var S=k.storage(),T=k.database().ref(),j=T.child("todos"),O=T.child("audios"),N=T.child("starts"),U=function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:T.child("starts").child("-"+e.classId).update({status:!e.status,class:e.class});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},I=function(){return function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N.on("value",(function(e){t({type:"FETCH_STARTS",payload:e.val()})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R=function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:j.push().set(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},B=function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:O.push().set(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},D=function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:j.child(e).remove();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},M=function(){return function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j.on("value",(function(e){t({type:"FETCH_TODOS",payload:e.val()})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(){return function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.on("value",(function(e){t({type:"FETCH_TODOS",payload:e.val()})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=a(8),P=a(12),L=(a(84),function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).completeClick=function(t){(0,e.props.completeToDo)(t)},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.todoId,n=t.todo;return o.a.createElement(F.a,{bg:"light",style:{color:"black"}},o.a.createElement("div",{className:"parent"},o.a.createElement(F.a.Img,{variant:"top",src:n.photoUrl}),!this.props.audioUrl&&o.a.createElement("div",{className:"child"},o.a.createElement("h4",{id:"reviewText"},this.props.instructor," is reviewing the submitted picture",o.a.createElement("br",null),o.a.createElement("br",null),"Please wait"))),o.a.createElement(F.a.Body,null,o.a.createElement(P.a,{onClick:function(){return e.completeClick(a)}},"Retake Photo"),this.props.audioUrl&&o.a.createElement(F.a.Text,null,o.a.createElement("h5",{style:{"padding-bottom":"2em"}},"Your feedback has been received:"),o.a.createElement("audio",{src:this.props.audioUrl,controls:"controls",autoplay:!0}))))}}]),a}(r.Component)),A=Object(i.b)(null,{completeToDo:D})(L),H=a(94),V=a(92),_=new(a.n(V).a)({bitRate:128}),W=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).start=function(){n.state.isBlocked?console.log("Permission Denied"):_.start().then((function(){n.setState({isRecording:!0})})).catch((function(e){return console.error(e)}))},n.stop=function(){var e=n.props.addFeedback;_.stop().getMp3().then((function(t){var a=Object(H.a)(t,2),r=(a[0],a[1]),o=URL.createObjectURL(r);n.setState({blobURL:o,isRecording:!1});var s=n.props.username+"-"+n.props.todo.title+"-"+n.props.todo.className+"-"+n.props.todo.timestamp;S.ref("audios/".concat(s)).put(r).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);n.setState({progress:t})}),(function(e){console.log(e)}),(function(){S.ref("audios").child(s).getDownloadURL().then((function(t){var a=new Date+"";e({instructor:n.props.username,student:n.props.todo.title,className:n.props.todo.className,audioUrl:t,timestamp:a}),n.setState({isRecording:!1,blobURL:"",isBlocked:!1,variant:"success",textColor:"white"})}))}))})).catch((function(e){return console.log(e)}))},n.state={isRecording:!1,blobURL:"",isBlocked:!1,variant:"light",textColor:"black"},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;navigator.getUserMedia({audio:!0},(function(){console.log("Permission Granted"),e.setState({isBlocked:!1})}),(function(){console.log("Permission Denied"),e.setState({isBlocked:!0})}))}},{key:"render",value:function(){var e=this.props,t=(e.todoId,e.todo),a=this.state.textColor;return o.a.createElement(F.a,{bg:this.state.variant,style:{color:a}},o.a.createElement(F.a.Img,{variant:"top",src:t.photoUrl}),o.a.createElement(F.a.Body,null,o.a.createElement(F.a.Title,null,t.title),o.a.createElement(P.a,{variant:"danger",onClick:this.start,disabled:this.state.isRecording},"Record"),o.a.createElement(P.a,{variant:"dark",onClick:this.stop,disabled:!this.state.isRecording},"Stop")))}}]),a}(r.Component),Y=Object(i.b)(null,{addFeedback:B})(W),z=(a(85),a(93)),J=a.n(z),G=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).inputChange=function(e){n.setState({formValue:e.target.value})},n.handleChangeImage=function(e){if(e.target.files[0]){var t=e.target.files[0];n.setState({imageTest:t})}},n.formSubmit=function(e){var t=n.props.addToDo,a=n.state.formValue,r=new Date+"";S.ref("images/".concat(r)).putString(e,"data_url").on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);n.setState({progress:t})}),(function(e){}),(function(){S.ref("images").child(r).getDownloadURL().then((function(e){t({title:n.props.username,className:n.props.chosenClass,photoUrl:e,comments:a}),n.setState({formValue:"",imageTest:"",showForm:!1})}))}))},n.renderForm=function(){var e=Object(r.createRef)();n.state.formValue;return o.a.createElement("div",null,o.a.createElement("div",{width:"100%",height:"50em"},o.a.createElement(J.a,{audio:!1,ref:e,screenshotFormat:"image/jpeg",width:"100%",style:{height:"20em"}})),o.a.createElement("div",{className:"centerInsides"},o.a.createElement(P.a,{variant:"primary",onClick:function(){n.formSubmit(e.current.getScreenshot())},style:{"margin-top":"3em"}},"Take Screenshot")))},n.state={showForm:!0,formValue:"",photoValue:null},n.handleChange=n.handleChangeImage.bind(Object(v.a)(n)),n}return Object(h.a)(a,[{key:"renderToDo",value:function(){var e=this,t=this.props.data,a=this.props.username,n=[];return b.a.forEach(t,(function(t,r){var s="instructor"===e.props.userType,c=!s&&t.title===e.props.username,i=e.props.chosenClass===t.className;c&&i?n.push(o.a.createElement(A,{key:r,todoId:r,todo:t,audioUrl:e.props.audioUrl,instructor:e.props.instructor})):s&&i&&n.push(o.a.createElement("div",{className:"column"},o.a.createElement(Y,{username:a,key:r,todoId:r,todo:t})))})),b.a.isEmpty(n)?o.a.createElement("div",null,this.renderForm()):n}},{key:"componentWillMount",value:function(){this.props.fetchToDos()}},{key:"render",value:function(){var e=this.props;e.username,e.chosenClass;return"instructor"===e.userType?o.a.createElement("div",{className:"row"},this.renderToDo()):o.a.createElement("div",{className:"centerInsides",style:{"margin-top":"3em"}},this.renderToDo())}}]),a}(r.Component),K=Object(i.b)((function(e){return{data:e.data}}),n)(G),q=(r.Component,a(167),a(168),a(32)),Q=["https://www.verywellfit.com/thmb/UWC6eL4g74LwJQF33TyTn1C6h7w=/768x0/filters:no_upscale():max_bytes(150000):strip_icc():format(webp)/yoga-class-stretching-640630209-57f3b8263df78c690f28580c.jpg","https://themmaguru.com/wp-content/uploads/2018/04/martial-arts-1.jpg","https://sanfranciscoparksalliance.org/wp-content/uploads/2019/09/screen_3x-1.jpg"],X=["Intermediate Yoga","Experienced Martial Arts","Beginner Tai Chi"],$=["Kevin Tran","Yun Liao","Sharon Konami"],Z=["March 3 - May 15, Sat 10:00 am - 11:00 am","March 3 - May 22, Sat 10:30 am - 11:30 am","March 10 - May 8, Sat 10:00 am - 11:15 am"],ee=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={homePageClicked:!1,name:"",chosenClass:"",chosenInstructor:"",chosenUserType:"",movementStatus:[]},n}return Object(h.a)(a,[{key:"componentWillMount",value:function(){var e=this;T.child("starts").child("-M8opR64rBwetB1_u2Sw").on("value",(function(t){e.setState({movementStatus:t.val()})})),T.child("audios").on("value",(function(t){e.setState({audios:t.val()})}))}},{key:"setName",value:function(){this.setState({name:document.getElementById("name").value})}},{key:"startMovement",value:function(){var e=this,t=this.props,a=t.addStart;(0,t.fetchStarts)();var n=this.props.data,r=!1;b.a.forEach(n,(function(t,a){e.state.chosenClass===t.class&&(r=t.status)})),a({classId:"M8opR64rBwetB1_u2Sw",class:this.state.chosenClass,status:r})}},{key:"getStatusMovement",value:function(){return this.state.movementStatus.status}},{key:"getAudioFeedback",value:function(){if("student"!==this.state.chosenUserType||!this.state.audios)return!1;var e=this.state.audios,t=this.state.name,a=this.state.chosenClass,n=null;return Object.keys(e).forEach((function(r){var o=e[r].student,s=e[r].className;o===t&&s===a&&(n=e[r].audioUrl)})),n}},{key:"checkMovement",value:function(){var e=this,t=this.props.data,a=(this.props.addStart,!1);return b.a.forEach(t,(function(t,n){e.state.chosenClass===t.class&&(a=t.status)})),a}},{key:"render",value:function(){var e=this;if(!this.state.homePageClicked)return o.a.createElement("div",{onClick:function(){e.setState({homePageClicked:!0})},className:"homePageParent"},o.a.createElement("img",{src:"https://firebasestorage.googleapis.com/v0/b/cse441-group1.appspot.com/o/images%2Flogo.png?alt=media&token=5b9c0427-a6ed-4978-8b80-5feafae093cc",id:"img",style:{"margin-bottom":"3em"}}),o.a.createElement("h3",null,"Exercise Together. "),o.a.createElement("h6",null,"Click to continue."));if(!this.state.chosenUserType)return o.a.createElement("div",null,o.a.createElement("div",{className:"homePageParent",style:{width:"50%"}},o.a.createElement("h3",{style:{"margin-bottom":"2em"}},"I am a(n):"),o.a.createElement(P.a,{variant:"outline-primary",size:"lg",onClick:function(){e.setState({chosenUserType:"instructor"})},block:!0},"Instructor"),o.a.createElement("br",null),o.a.createElement(P.a,{variant:"outline-primary",size:"lg",onClick:function(){e.setState({chosenUserType:"student"})},block:!0},"Student")));if(!this.state.name)return o.a.createElement("div",{className:"homePageParent",style:{width:"50%"}},o.a.createElement("h3",null,"UW NetId Login"),o.a.createElement(q.a.Group,{controlId:"name"},o.a.createElement(q.a.Control,{type:"email",placeholder:"Username"})),o.a.createElement(q.a.Group,{controlId:"password"},o.a.createElement(q.a.Control,{type:"password",placeholder:"Password"})),o.a.createElement(P.a,{onClick:function(){e.setName()}},"Login"));if(!this.state.chosenClass){for(var t=[],a=function(a){t.push(o.a.createElement("div",{onClick:function(){e.setState({chosenClass:X[a],chosenInstructor:$[a]})},className:"textBlack"},o.a.createElement(F.a,null,o.a.createElement(F.a.Img,{variant:"top",src:Q[a]}),o.a.createElement(F.a.Body,null,o.a.createElement(F.a.Title,null,X[a]," with ",$[a]),o.a.createElement(F.a.Text,null,Z[a])))))},n=0;n<X.length;n++)a(n);return o.a.createElement("div",null,o.a.createElement("div",{id:"classProfileBackground"},o.a.createElement("img",{src:"https://firebasestorage.googleapis.com/v0/b/cse441-group1.appspot.com/o/images%2Fcircle-cropped.png?alt=media&token=222e65c0-f673-4914-bc0d-9d68dc1a5441",height:"70%",style:{"padding-bottom":"1em","padding-top":"5em"}}),o.a.createElement("h3",null,"Welcome back, ",this.state.name,"!")),o.a.createElement("div",{className:"dark",id:"classList"},o.a.createElement("h3",{style:{color:"white","padding-bottom":".5em"}},"My Classes"),o.a.createElement("div",{id:"classChooseBG"},t)))}return this.getStatusMovement()?"instructor"===this.state.chosenUserType?o.a.createElement("div",{className:"dark"},o.a.createElement("div",{className:"viewVideoHeader"},o.a.createElement("h2",null,this.state.chosenClass)),o.a.createElement("div",{width:"100%",height:"50em"},o.a.createElement("iframe",{src:"https://treytamaki.github.io/workroom/webcam.html",allow:"camera",width:"100%",style:{height:"20em"}})),o.a.createElement("div",{className:"centerInsides"},o.a.createElement("h5",{style:{"margin-top":"3em","margin-bottom":"3em"}},"Detailed instructions make better performance!"),o.a.createElement(P.a,{variant:"primary",onClick:function(){e.startMovement()}},"See Submitted Photos")),o.a.createElement("div",{className:"viewVideoHeader"})):"student"===this.state.chosenUserType?o.a.createElement("div",{className:"dark"},o.a.createElement("div",{className:"viewVideoHeader"},o.a.createElement("h2",null,this.state.chosenClass),o.a.createElement("h4",null,"with ",this.state.chosenInstructor)),o.a.createElement("div",{width:"100%",height:"50em"},o.a.createElement("iframe",{src:"https://treytamaki.github.io/workroom/webcam.html",allow:"camera",width:"100%",style:{height:"20em"}})),o.a.createElement("div",{className:"centerInsides"},o.a.createElement("h5",{style:{"margin-top":"3em","margin-bottom":"3em"}},o.a.createElement("br",null),o.a.createElement("br",null))),o.a.createElement("div",{className:"viewVideoHeader"})):void 0:"instructor"===this.state.chosenUserType?o.a.createElement("div",null,o.a.createElement("div",{className:"dark border"},o.a.createElement("h3",null,"Submissions"),o.a.createElement(K,{username:this.state.name,chosenClass:this.state.chosenClass,userType:this.state.chosenUserType,audioUrl:this.getAudioFeedback()}),o.a.createElement("div",{className:"centerInsides"},o.a.createElement(P.a,{variant:"primary",onClick:function(){e.startMovement()}},"End Submissions")),o.a.createElement("div",{className:"viewVideoHeader"}))):o.a.createElement("div",null,o.a.createElement("div",{className:"dark border"},o.a.createElement("h3",null,"Your Submission"),o.a.createElement(K,{username:this.state.name,chosenClass:this.state.chosenClass,userType:this.state.chosenUserType,audioUrl:this.getAudioFeedback(),instructor:this.state.chosenInstructor}),o.a.createElement("div",{className:"viewVideoHeader"}),o.a.createElement("div",{className:"viewVideoHeader"}),o.a.createElement("div",{className:"viewVideoHeader"})))}}]),a}(r.Component),te=Object(i.b)((function(e){return{data:e.data}}),n)(ee),ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var re=Object(l.d)(m,{},Object(l.a)(u.a));c.a.render(o.a.createElement(i.a,{store:re},o.a.createElement(te,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/workroom",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/workroom","/service-worker.js");ae?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):ne(t,e)}))}}()},84:function(e,t,a){},85:function(e,t,a){},90:function(e,t,a){e.exports=a(166)},95:function(e,t,a){e.exports=a(171)}},[[95,1,2]]]);
//# sourceMappingURL=main.50a539a3.chunk.js.map